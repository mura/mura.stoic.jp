---
layout: single
title: L-Card+ その2
date: 2003-12-01 12:00:00.000000000 +09:00
type: post
tags: []
permalink: "/2003/12/lcard_2/"
---
ども、冬なのに冬を感じてないarumです。<br />
やっとユニバーサル基盤届いたよ。これで卒研はじめられる（ぉ<br />
それと1GBのコンパクトフラッシュも届いたので、セルフコンパイル環境を構築。<br />
まず、CD-ROM付属のユーザーランド（コマンドや、Flash ROMのバックアップが入ってる）を<br />
母艦（クロスコンパイル環境を構築しているシステム。この場合Linux）に解凍。<br />
そして、6in1なメモリリーダをLinuxのUSBに接続し、CFもつないでフォーマット。<br />
なぜかドライバなしでSCSIデバイスとして認識・・・おそるべしRed Hat。<br />
で、fdiskでパーティションを消して、mkfs.ext2でext2パーティションを作成。<br />
そのあとユーザランドをCFにコピーして完了。ここまで問題なし。<br />
さらに、L-Card+用（というかmipsel用のrpm）をCFにコピーしておく。<br />
これで、急なパッケージの追加もいちいちダウンロードする必要が無くなる。<br />
さて、ここからが問題。うまいことL-Card+さんが認識してくれるか。<br />
L-Card+にCFを指して、電源ON。IPL Monitorが立ち上がるのでスペースでメニューに入って<br />
rootパーティションを/dev/hda1に変更。これでCFからブートする。<br />
そして起動！・・・問題なく起動。しかもなんとなく起動が早い気がする・・・さすが！20倍速。<br />
次にセルフコンパイル環境を構築する。<br />
クロスとセルフの違いは、自分のCPU用のバイナリを作るか、他のCPU用のバイナリを作るかというものなのだが<br />
説明しだすとめんどくさいので、各自Googleで調べること（何<br />
必要なパッケージはglibc-develとkernel-headers、そしてgcc関連のパッケージ。rpmで足りないよ〜<br />
といわれるパッケージも次々入れてゆく。<br />
そのあと、
```c
#include <stdio.h>
int main()
{
  printf("Hello L-Card+!\n") ;
}
```
な`hello.c`がコンパイルできれば完成。<br />
ディストリビューションがRed Hatで、rpmが使えるのでインストールもらくらく。<br />
あとは、ソフトのコンパイルかぁ・・・66MHzのCPUにがんばってもらいますか
